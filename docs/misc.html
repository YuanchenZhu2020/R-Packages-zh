<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="学习如何创建软件包（package），它是可分享、可复用和可重复的 R 代码。">
<title>R Packages (2e) - 8&nbsp; 其它组件</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./data.html" rel="prev">
<link href="./images/cover-2e-small.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script defer="" data-domain="r-pkgs.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./code.html">软件包组件</a></li><li class="breadcrumb-item"><a href="./misc.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">其它组件</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Packages (2e)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hadley/r-pkgs/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">欢迎！</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./translator-preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">翻译与排版说明</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">前言</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">简介</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">入门</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./whole-game.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">整个流程</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">系统设置</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">软件包结构与状态</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow101.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">基本开发工作流</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./package-within.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The package within</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">软件包组件</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./misc.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">其它组件</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R-CMD-check.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title"><code>R CMD check</code></span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#%E5%85%B6%E5%AE%83%E7%9B%AE%E5%BD%95" id="toc-其它目录" class="nav-link active" data-scroll-target="#%E5%85%B6%E5%AE%83%E7%9B%AE%E5%BD%95"><span class="header-section-number">8.1</span> 其它目录</a></li>
  <li>
<a href="#sec-misc-inst" id="toc-sec-misc-inst" class="nav-link" data-scroll-target="#sec-misc-inst"><span class="header-section-number">8.2</span> Installed files</a>
  <ul class="collapse">
<li><a href="#sec-misc-inst-citation" id="toc-sec-misc-inst-citation" class="nav-link" data-scroll-target="#sec-misc-inst-citation"><span class="header-section-number">8.2.1</span> Package citation</a></li>
  </ul>
</li>
  <li><a href="#sec-misc-tools" id="toc-sec-misc-tools" class="nav-link" data-scroll-target="#sec-misc-tools"><span class="header-section-number">8.3</span> Configuration tools</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/hadley/r-pkgs/edit/main/misc.Rmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/hadley/r-pkgs/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-misc" class="quarto-section-identifier"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">其它组件</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>本书这一部分的前两章涵盖了人们可以通过 R 包分发的两个最明显的内容：函数 (<a href="code.html"><span>Chapter&nbsp;6</span></a>) 和数据 (<a href="data.html"><span>Chapter&nbsp;7</span></a>)。 但这并不是制作一个 R 软件包的全部内容。 还有其他软件包组件是必需的，例如 <code>DESCRIPTION</code> 文件，或者是我们强烈推荐的其它组件，例如测试和文档。</p>
<p>本书接下来的几个部分围绕重要的概念进行组织：软件包依赖、测试和文档。 但在我们深入研究这些主题之前，本章将揭开一些组件的神秘面纱，不是每个包都需要这些组件，但了解它们是很有益处的。</p>
<section id="其它目录" class="level2" data-number="8.1"><h2 data-number="8.1" class="anchored" data-anchor-id="其它目录">
<span class="header-section-number">8.1</span> 其它目录</h2>
<p>下面是一些你可能会在 R 源码包中遇到的顶级目录，按其重要性和使用频率大致排序：</p>
<ul>
<li><p><code>src/</code>：存放已编译代码的源文件和头文件，通常是 C 和 c++。 这是一项重要的技术，用于提高 R 包的性能，并能够为 R 用户释放外部库的强大功能。 从第二版开始，本书将不再涵盖这个主题，因为对已编译代码的真正有用的处理需要更多的篇幅进行说明，我们无法在这里给出。 tidyverse 一般使用 <a href="https://cpp11.r-lib.org">cpp11 包</a> 来将 C++ 连接到 R 中；大多数其他包使用 <a href="https://www.rcpp.org">Rcpp</a>，这是最完善的用于集成 R 和 C++ 的包。</p></li>
<li><p><code>inst/</code>：用于存放你希望包含在软件包中的任意其他文件。 这包括一些特殊的文件，比如下面 <a href="#sec-misc-inst"><span>Section&nbsp;8.2</span></a> 描述的 <code>CITATION</code>。 其他可能出现在 <code>inst/</code> 目录中的文件示例包括 R Markdown 模板（参见 <code><a href="https://usethis.r-lib.org/reference/use_rmarkdown_template.html">usethis::use_rmarkdown_template()</a></code>）或 <a href="https://docs.posit.co/ide/user/ide/guide/productivity/add-ins.html">RStudio 插件</a>。</p></li>
<li><p><code>tools/</code>：存放配置过程中需要的辅助文件，通常和 <code>configure</code> 脚本一起出现。 我们将在下面的 <a href="#sec-misc-tools"><span>Section&nbsp;8.3</span></a> 中对此进行详细讨论。</p></li>
<li><p><code>demo/</code>：用于软件包演示。 我们将演示示例视作一种遗留现象，其目标现在可以通过主题文档 (vignette) 更好地实现 (<span class="quarto-unresolved-ref">?sec-vignettes</span>)。 对于积极维护的包，在任何现有的演示示例中重新使用更可见的内容(例如在README中)可能是有意义的。For actively maintained packages, it probably makes sense to repurpose the content in any existing demos somewhere that’s more visible, e.g.&nbsp;in <code>README.Rmd</code> (<span class="quarto-unresolved-ref">?sec-readme</span>) or in vignettes (<span class="quarto-unresolved-ref">?sec-vignettes</span>). These other locations offer other advantages, such as making sure that the code is exercised regularly. This is not true of actual demos, leaving them vulnerable to rot.</p></li>
<li><p><code>exec/</code>: for executable scripts. Unlike files placed in other directories, files in <code>exec/</code> are automatically flagged as executable. Empirically, to the extent that R packages are shipping scripts for external interpreters, the <code>inst/</code> directory seems to be the preferred location these days.</p></li>
<li><p><code>po/</code>: translations for messages. This is useful, but beyond the scope of this book. See the <a href="https://cran.rstudio.com/doc/manuals/r-devel/R-exts.html#Internationalization">Internationalization</a> chapter of “Writing R extensions” and the <a href="https://michaelchirico.github.io/potools/index.html">potools package</a> for more details.</p></li>
</ul></section><section id="sec-misc-inst" class="level2" data-number="8.2"><h2 data-number="8.2" class="anchored" data-anchor-id="sec-misc-inst">
<span class="header-section-number">8.2</span> Installed files</h2>
<p>When a package is installed, everything in <code>inst/</code> is copied into the top-level directory of the installed package (see <a href="structure.html#fig-package-files">Figure&nbsp;<span>3.1</span></a>). In some sense <code>inst/</code> is the opposite of <code>.Rbuildignore</code> - where <code>.Rbuildignore</code> lets you remove arbitrary files and directories from the built package, <code>inst/</code> lets you add them.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>You are free to put anything you like in <code>inst/</code> with one caution: because <code>inst/</code> is copied into the top-level directory, don’t create a subdirectory that collides with any of the directories that make up the official structure of an R package. We recommend avoiding directories with special significance in either the source or installed form of a package, such as: <code>inst/data</code>, <code>inst/help</code>, <code>inst/html</code>, <code>inst/libs</code>, <code>inst/man</code>, <code>inst/Meta</code>, <code>inst/R</code>, <code>inst/src</code>, <code>inst/tests</code>, <code>inst/tools</code>, and <code>inst/vignettes</code>. In most cases, this prevents you from having a malformed package. And even though some of the above directories are technically allowed, they can be an unnecessary source of confusion.</p>
</div>
</div>
<p>Here are some of the most common files and folders found in <code>inst/</code>:</p>
<ul>
<li><p><code>inst/CITATION</code>: how to cite the package, see below for details.</p></li>
<li><p><code>inst/extdata</code>: additional external data for examples and vignettes. See section <a href="data.html#sec-data-extdata"><span>Section&nbsp;7.3</span></a> for more detail.</p></li>
</ul>
<p>What if you need a path to the file at <code>inst/foo</code> to use in, e.g., the code below <code>R/</code> or in your documentation? The default solution is to use <code>system.file("foo", package = "yourpackage")</code>. But this presents a workflow dilemma: When you’re developing your package, you engage with it in its source form (<code>inst/foo</code>), but your users engage with its installed form (<code>/foo</code>). Happily, devtools provides a shim for <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code> that is activated by <code>load_all()</code>. Section <a href="data.html#sec-data-system-file"><span>Section&nbsp;7.3.1</span></a> covers this in more depth and includes an interesting alternative, <code><a href="https://fs.r-lib.org/reference/path_package.html">fs::path_package()</a></code> .</p>
<section id="sec-misc-inst-citation" class="level3" data-number="8.2.1"><h3 data-number="8.2.1" class="anchored" data-anchor-id="sec-misc-inst-citation">
<span class="header-section-number">8.2.1</span> Package citation</h3>
<p>The <code>CITATION</code> file lives in the <code>inst</code> directory and is intimately connected to the <code><a href="https://rdrr.io/r/utils/citation.html">citation()</a></code> function which tells you how to cite R and R packages. Calling <code><a href="https://rdrr.io/r/utils/citation.html">citation()</a></code> without any arguments tells you how to cite base R:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; To cite R in publications use:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   R Core Team (2022). R: A language and environment for</span></span>
<span><span class="co">#&gt;   statistical computing. R Foundation for Statistical</span></span>
<span><span class="co">#&gt;   Computing, Vienna, Austria. URL</span></span>
<span><span class="co">#&gt;   https://www.R-project.org/.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   @Manual{,</span></span>
<span><span class="co">#&gt;     title = {R: A Language and Environment for Statistical Computing},</span></span>
<span><span class="co">#&gt;     author = {{R Core Team}},</span></span>
<span><span class="co">#&gt;     organization = {R Foundation for Statistical Computing},</span></span>
<span><span class="co">#&gt;     address = {Vienna, Austria},</span></span>
<span><span class="co">#&gt;     year = {2022},</span></span>
<span><span class="co">#&gt;     url = {https://www.R-project.org/},</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; We have invested a lot of time and effort in creating R,</span></span>
<span><span class="co">#&gt; please cite it when using it for data analysis. See also</span></span>
<span><span class="co">#&gt; 'citation("pkgname")' for citing R packages.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Calling it with a package name tells you how to cite that package:</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; To cite package 'tidyverse' in publications use:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Wickham H, Averick M, Bryan J, Chang W, McGowan LD,</span></span>
<span><span class="co">#&gt;   François R, Grolemund G, Hayes A, Henry L, Hester J, Kuhn</span></span>
<span><span class="co">#&gt;   M, Pedersen TL, Miller E, Bache SM, Müller K, Ooms J,</span></span>
<span><span class="co">#&gt;   Robinson D, Seidel DP, Spinu V, Takahashi K, Vaughan D,</span></span>
<span><span class="co">#&gt;   Wilke C, Woo K, Yutani H (2019). "Welcome to the</span></span>
<span><span class="co">#&gt;   tidyverse." _Journal of Open Source Software_, *4*(43),</span></span>
<span><span class="co">#&gt;   1686. doi:10.21105/joss.01686</span></span>
<span><span class="co">#&gt;   &lt;https://doi.org/10.21105/joss.01686&gt;.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   @Article{,</span></span>
<span><span class="co">#&gt;     title = {Welcome to the {tidyverse}},</span></span>
<span><span class="co">#&gt;     author = {Hadley Wickham and Mara Averick and Jennifer Bryan and Winston Chang and Lucy D'Agostino McGowan and Romain François and Garrett Grolemund and Alex Hayes and Lionel Henry and Jim Hester and Max Kuhn and Thomas Lin Pedersen and Evan Miller and Stephan Milton Bache and Kirill Müller and Jeroen Ooms and David Robinson and Dana Paige Seidel and Vitalie Spinu and Kohske Takahashi and Davis Vaughan and Claus Wilke and Kara Woo and Hiroaki Yutani},</span></span>
<span><span class="co">#&gt;     year = {2019},</span></span>
<span><span class="co">#&gt;     journal = {Journal of Open Source Software},</span></span>
<span><span class="co">#&gt;     volume = {4},</span></span>
<span><span class="co">#&gt;     number = {43},</span></span>
<span><span class="co">#&gt;     pages = {1686},</span></span>
<span><span class="co">#&gt;     doi = {10.21105/joss.01686},</span></span>
<span><span class="co">#&gt;   }</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The associated <code>inst/CITATION</code> file looks like this:</p>
<div class="cell">
<pre><code>bibentry(
  "Article",
  title = "Welcome to the {tidyverse}",
  author = "Hadley Wickham, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D'Agostino McGowan, Romain François, Garrett Grolemund, Alex Hayes, Lionel Henry, Jim Hester, Max Kuhn, Thomas Lin Pedersen, Evan Miller, Stephan Milton Bache, Kirill Müller, Jeroen Ooms, David Robinson, Dana Paige Seidel, Vitalie Spinu, Kohske Takahashi, Davis Vaughan, Claus Wilke, Kara Woo, Hiroaki Yutani",
  year = 2019,
  journal = "Journal of Open Source Software",
  volume = 4,
  number = 43,
  pages = 1686,
  doi = "10.21105/joss.01686",
)</code></pre>
</div>
<p>You can call <code><a href="https://usethis.r-lib.org/reference/use_citation.html">usethis::use_citation()</a></code> to initiate this file and fill in your details. Read the <code><a href="https://rdrr.io/r/utils/bibentry.html">?bibentry</a></code> help topic for more details.</p>
</section></section><section id="sec-misc-tools" class="level2" data-number="8.3"><h2 data-number="8.3" class="anchored" data-anchor-id="sec-misc-tools">
<span class="header-section-number">8.3</span> Configuration tools</h2>
<p>If a package has a configuration script (<code>configure</code> on Unix-alikes, <code>configure.win</code> on Windows), it is executed as the first step by <code>R CMD INSTALL</code>. This is typically associated with a package that has a <code>src/</code> subdirectory containing C/C++ code and the <code>configure</code> script is needed at compile time. If that script needs auxiliary files, those should be located in the <code>tools/</code> directory. The scripts below <code>tools/</code> can have an effect on the installed package, but the contents of <code>tools/</code> will not ultimately be present in the installed package. In any case, this is mostly (but not solely) relevant to packages with compiled code, which is beyond the scope of this book.</p>
<p>We bring this up because, in practice, some packages use the <code>tools/</code> directory for a different but related purpose. Some packages have periodic maintenance tasks for which it is helpful to record detailed instructions. For example, many packages embed some sort of external resource, e.g.&nbsp;code or data:</p>
<ul>
<li><p>Source code and headers for an embedded third-party C/C++ library.</p></li>
<li><p>Web toolkits.</p></li>
<li><p>R code that’s inlined (as opposed to imported).</p></li>
<li><p>Specification for a web API.</p></li>
<li><p>Colour palettes, styles, and themes.</p></li>
</ul>
<p>These external assets are also usually evolving over time, so they need to be re-ingested on a regular basis. This makes it particularly rewarding to implement such housekeeping programmatically.</p>
<p>This is the second, unofficial use of the <code>tools/</code> directory, characterized by two big differences from its official purpose: The packages that do this generally do not have a <code>configure</code> script and they list <code>tools/</code> in <code>.Rbuildignore</code>, meaning that these scripts are not included in the package bundle. These scripts are maintained in the source package for developer convenience but are never shipped with the package.</p>
<p>This practice is closely related to our recommendation to store the instructions for the creation of package data in <code>data-raw/</code> (section <a href="data.html#sec-data-data-raw"><span>Section&nbsp;7.1.1</span></a>) and to record the method of construction for any test fixtures (section <span class="quarto-unresolved-ref">?sec-testing-advanced-concrete-fixture</span>).</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">References</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>